networks:
  backend-network:

services:
  image-processor:
    container_name: image-processor
    command: node index.mjs --port 3001
    image: ghcr.io/remenyo/image-processor
    networks:
      - backend-network

  file-store:
    container_name: file-store
    image: ghcr.io/remenyo/file-store
    command: node index.mjs --imageProcessorURL http://image-processor:3001
    volumes:
      - ./images:/images
    ports:
      - "3000:3000"
    networks:
      - backend-network
    depends_on:
      - image-processor

  webpage-host:
    container_name: webpage-host
    image: ghcr.io/remenyo/webpage-host
    ports:
      - "80:3000"
    networks:
      - backend-network
    depends_on:
      - file-store
      - image-processor
